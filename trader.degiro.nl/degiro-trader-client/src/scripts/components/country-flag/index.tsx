import * as React from 'react';
import {flag, noBorder} from './country-flag.css';
import flagSpriteUrl from '../../../images/flags/flag-sprite.png';
import flagSprite2xUrl from '../../../images/flags/flag-sprite@2x.png';
import flagSprite3xUrl from '../../../images/flags/flag-sprite@3x.png';

interface Props {
    country: string;
    className?: string;
}

const noBorderFlags: string[] = ['CH', 'NP'];
const offsets: Partial<Record<string, number>> = {
    DZ: 0.2287,
    AO: 0.4524,
    BJ: 0.6721,
    BW: 0.8958,
    BF: 1.1162,
    BI: 1.3379,
    CM: 1.5589,
    CV: 1.7836,
    CF: 2.0047,
    TD: 2.2247,
    CD: 2.4467,
    DJ: 2.6674,
    EG: 2.8931,
    GQ: 3.1125,
    ER: 3.3325,
    ET: 3.5542,
    GA: 3.7759,
    GM: 4.0015,
    GH: 4.2229,
    GN: 4.441,
    GW: 4.66663,
    CI: 4.8844,
    KE: 5.1061,
    LS: 5.3278,
    LR: 5.5495,
    LY: 5.7712,
    MG: 5.994,
    MW: 6.2156,
    ML: 6.4363,
    MR: 6.658,
    MU: 6.8805,
    YT: 7.1038,
    MA: 7.3231,
    MZ: 7.5448,
    NA: 7.7661,
    NE: 7.98937,
    NG: 8.2099,
    CG: 8.4316,
    RE: 8.6533,
    RW: 8.875,
    SH: 9.0967,
    ST: 9.32237,
    SN: 9.5426,
    SC: 9.7628,
    SL: 9.9845,
    SO: 10.2052,
    ZA: 10.4269,
    SS: 10.6486,
    SD: 10.8703,
    SR: 11.0945,
    SZ: 11.3135,
    TG: 11.5354,
    TN: 11.7593,
    UG: 11.9799,
    TZ: 12.2005,
    EH: 12.4222,
    YE: 12.644,
    ZM: 12.8664,
    ZW: 13.0873,
    AI: 13.309,
    AG: 13.5307,
    AR: 13.7524,
    AW: 13.9741,
    BS: 14.1958,
    BB: 14.4175,
    BQ: 14.6415,
    BZ: 14.8609,
    BM: 15.0826,
    BO: 15.306,
    VG: 15.528,
    BR: 15.7496,
    CA: 15.9694,
    KY: 16.1911,
    CL: 16.4128,
    CO: 16.6345,
    KM: 16.8562,
    CR: 17.0779,
    CU: 17.2996,
    CW: 17.5213,
    DM: 17.743,
    DO: 17.968,
    EC: 18.1864,
    SV: 18.4081,
    FK: 18.6298,
    GF: 18.8515,
    GL: 19.0732,
    GD: 19.2987,
    GP: 19.518,
    GT: 19.7383,
    GY: 19.96,
    HT: 20.1817,
    HN: 20.4034,
    JM: 20.6241,
    MQ: 20.8468,
    MX: 21.0685,
    MS: 21.2902,
    NI: 21.5119,
    PA: 21.7336,
    PY: 21.9553,
    PE: 22.177,
    PR: 22.4002,
    BL: 22.6204,
    KN: 22.8421,
    LC: 23.0638,
    PM: 23.2855,
    VC: 23.5072,
    SX: 23.732,
    TT: 23.9506,
    TC: 24.1723,
    US: 24.394,
    VI: 24.6157,
    UY: 24.8374,
    VE: 25.0591,
    AF: 25.2808,
    AZ: 25.5025,
    BD: 25.7242,
    BT: 25.9459,
    BN: 26.1676,
    KH: 26.3885,
    CN: 26.611,
    GE: 26.8327,
    HK: 27.0544,
    IN: 27.2761,
    ID: 27.4978,
    JP: 27.7195,
    KZ: 27.9412,
    LA: 28.1615,
    MO: 28.3846,
    MY: 28.6063,
    MV: 28.829,
    MN: 29.0497,
    MM: 29.2714,
    NP: 29.4931,
    KP: 29.7148,
    MP: 29.9365,
    PW: 30.1582,
    PG: 30.3799,
    PH: 30.6016,
    SG: 30.8233,
    KR: 31.045,
    LK: 31.2667,
    TW: 31.4884,
    TJ: 31.7101,
    TH: 31.9318,
    TL: 32.1535,
    TM: 32.3752,
    VN: 32.5969,
    AL: 32.8186,
    AD: 33.0403,
    AM: 33.258,
    AT: 33.4837,
    BY: 33.7054,
    BE: 33.9271,
    BA: 34.1488,
    BG: 34.3705,
    HR: 34.5922,
    CY: 34.8139,
    CZ: 35.0356,
    DK: 35.2555,
    EE: 35.479,
    FO: 35.7007,
    FI: 35.9224,
    FR: 36.1441,
    DE: 36.3658,
    GI: 36.5875,
    GR: 36.8092,
    HU: 37.0309,
    IS: 37.2526,
    IE: 37.4743,
    IM: 37.696,
    IT: 37.9177,
    JE: 38.1394,
    XK: 38.3611,
    LV: 38.5828,
    LI: 38.8045,
    LT: 39.0262,
    LU: 39.2479,
    MT: 39.4696,
    MD: 39.6913,
    MC: 39.913,
    ME: 40.1347,
    NL: 40.3564,
    MK: 40.5781,
    NO: 40.7998,
    PL: 41.0215,
    PT: 41.2432,
    RO: 41.4649,
    RU: 41.6866,
    SM: 41.9083,
    RS: 42.13,
    SK: 42.3517,
    SI: 42.5734,
    ES: 42.7951,
    SE: 43.0168,
    CH: 43.2385,
    TR: 43.4602,
    UA: 43.6819,
    GB: 43.9036,
    VA: 44.1253,
    BH: 44.347,
    IR: 44.5687,
    IQ: 44.7904,
    IL: 45.0121,
    KW: 45.2338,
    JO: 45.4555,
    KG: 45.6772,
    LB: 45.897,
    OM: 46.1206,
    PK: 46.3423,
    PS: 46.561,
    QA: 46.7857,
    SA: 47.0074,
    SY: 47.2291,
    AE: 47.4508,
    UZ: 47.6725,
    AS: 47.8942,
    AU: 48.1159,
    CX: 48.3376,
    CC: 48.5593,
    CK: 48.781,
    FJ: 49.0027,
    PF: 49.2244,
    GU: 49.4445,
    KI: 49.6678,
    MH: 49.8895,
    FM: 50.1112,
    NC: 50.3329,
    NZ: 50.5546,
    NR: 50.7763,
    NU: 50.998,
    NF: 51.2197,
    WS: 51.4414,
    SB: 51.6631,
    TK: 51.8848,
    TO: 52.1065,
    TV: 52.3282,
    VU: 52.5499,
    WF: 52.7716,
    EU: 52.9933,
    ERL: 52.9933,
    INT: 53.215
};
const CountryFlag: React.FunctionComponent<Props> = ({className, ...props}) => {
    const country: string = props.country.toLocaleUpperCase();
    const countryFlagOffset: number | undefined = offsets[country];
    const objectPosition: string = `center ${countryFlagOffset ?? 0}%`;
    const completeClassName: string = `${flag} ${noBorderFlags.includes(country) ? noBorder : ''} ${className}`;

    return (
        <img
            alt={country}
            className={completeClassName}
            width={20}
            height={13}
            data-country={country}
            data-name="countryFlag"
            loading="lazy"
            src={flagSpriteUrl}
            srcSet={`${flagSpriteUrl} 1x, ${flagSprite2xUrl} 2x, ${flagSprite3xUrl} 3x`}
            style={/* eslint-disable-line react/forbid-dom-props */ {objectPosition}}
        />
    );
};

export default React.memo(CountryFlag);
